!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=r[s]={exports:{}};t[s][0].call(p.exports,function(e){var r=t[s][1][e];return i(r?r:e)},p,p.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){var n=(e("./api"),e("./app"));if(window.Taplytics=t.exports=n,window._TLQueue&&window._TLQueue instanceof Array){var i=window._TLQueue;if(i.length>0)for(var o=0;o<i.length;o++){var s=i[o],a=s.shift(),u=s;n[a]instanceof Function&&n[a].apply(n,u)}}},{"./api":2,"./app":6}],2:[function(e,t,r){r.request=e("./api/base"),r.users=e("./api/users"),r.events=e("./api/events")},{"./api/base":3,"./api/events":4,"./api/users":5}],3:[function(e,t,r){function n(e,t,r){var n=l(t),i=c(e);f.get(i).query(n.query).end(s(i,r))}function i(e,t,r,n){var i=l(t,r),o=c(e);f.post(o).query(i.query).send(i.payload).end(s(o,n))}function o(e,t,r,n){var i=l(t,r),o=c(e);f.del(o).query(i.query).send(i.payload).end(s(o,n))}function s(e,t){return function(r,n){r&&d.error("Error: "+e,r,d.DEBUG),t&&"function"==typeof t&&t(r,n),u()}}function a(e){return function(){y.enqueue({requestFunction:e,args:arguments}),m||u()}}function u(){if(!y.isEmpty()){m=!0;var e=y.dequeue();return d.log("Processing request",e,d.DEBUG),e&&e.requestFunction&&e.requestFunction.apply(void 0,e.args)}m=!1}function c(e,t){return h.obj().baseAPI+(e||"")+p(t)}function p(e){return e?"?"+v.stringify(e):""}function l(e,t){var r={},n={};return r=e&&"function"==typeof e?e():e,n=t&&"function"==typeof t?t():t,{query:r,payload:n}}var f=e("superagent"),h=e("../../config"),d=e("../lib/logger"),g=e("../lib/queue"),v=e("qs");r.get=a(n),r.post=a(i),r.del=a(o);var y=new g,m=!1},{"../../config":20,"../lib/logger":14,"../lib/queue":16,qs:22,superagent:27}],4:[function(e,t,r){function n(e){return{type:e,date:(new Date).toISOString(),tvKey:c.attr("title"),tvCl:c.attr("href"),prod:s.isProduction()?1:0,data:{_tl_view:c.toObject()}}}function i(){a.log("Taplytics::events.flushQueue: tick.",f,a.DEBUG);var t=e("../app");if(!t||t&&!t.isReady())return scheduleTick();if(f.isEmpty())return scheduleTick();var n=f.flush(),i=t._in.session.getSessionID();i||o.post(t,{},"Taplytics::events.flushQueue: failed to create sessions. Events will fail to process."),r.post(t,n,function(e,t){e&&f.enqueueAll(n),scheduleTick()})}var o=(e("../api/base"),e("../api/users")),s=e("../../config"),a=e("../lib/logger"),u=e("../lib/merge"),c=e("../lib/location"),p=e("../lib/queue"),l="events",f=new p,h={goal:"goalAchieved",pageView:"viewAppeared",pageClose:"viewDisappeared",timeOnPage:"viewTimeOnPage"};r.types=h,r.timeOnPage=function(e,t,r,i,o,s){var a=n(h.timeOnPage);if(s&&s.getTime){var c=(new Date).getTime(),p=s.getTime(),l=(c-p)/1e3;a.val=l}return a.vKey=t,a.tKey=e,a.tvKey=i,a.tvCl=r,o&&(a.data=u(a.data||{},{_tl_view:o})),f.enqueue(a)},r.scheduleTick=function(){setTimeout(i,s.obj().eventsFlushQueueTimeout)},r.pageClose=function(e,t,r,i,o){var s=n(h.pageClose);return s.val=(new Date).toISOString(),s.vKey=t,s.tKey=e,s.tvKey=i,s.tvCl=r,o&&(s.data=u(s.data||{},{_tl_view:o})),f.enqueue(s)},r.pageView=function(e,t,r){var i=n(h.pageView);return r&&(i.data=u(i.data,r)),i.val=(new Date).toISOString(),i.vKey=t,i.tKey=e,f.enqueue(i)},r.goalAchieved=function(e,t,r){var i=n(h.goal);return r&&(i.data=u(i.data,r)),t&&(i.val=t),i.gn=e,f.enqueue(i)},r.post=function(e,t,r){var n={public_token:e._in.token},i=function(r){var n={};n.sid=e._in.session.getSessionID();var i={session:n,events:t};return i};api.request.post(l,n,i,function(e,t){return e?a.error("Taplytics::events.post: failed to log events",e,a.LOG):a.log("Taplytics::events.post: succesfully logged events.",t,a.DEBUG),r&&r(e,t)})}},{"../../config":20,"../api/base":3,"../api/users":5,"../app":6,"../lib/location":13,"../lib/logger":14,"../lib/merge":15,"../lib/queue":16}],5:[function(e,t,r){var n=e("../lib/location"),i=e("../lib/source"),o=e("../lib/logger"),s=e("../api"),a=e("../../config"),u="users";r.del=function(e,t){var r=e._in.session.getAppUserID();if(r){var n={};n.sid=e._in.session.getSessionID(),n.ad=e._in.session.getSessionUUID();var i={public_token:e._in.token},a={session:n};o.log("users_del",a,o.DEBUG),s.request.del(u+"/"+r,i,a,function(e,r){return e?o.error("Taplytics: Couldn't properly rest user.",r,o.DEBUG):o.log("Taplytics: successfully reset the user.",r,o.DEBUG),t&&t(e,r)})}},r.post=function(e,t,r,c){var p=n.toObject(),l=i(),f=t,h={};f||(f={}),h.sid=e._in.session.getSessionID(),h.ad=e._in.session.getSessionUUID(),h.adt="browser",h.ct="browser",h.lv=a.isProduction()?"0":"1",h.rfr=l.referrer,h.exm=l.search.utm_medium,h.exs=l.search.utm_source,h.exc=l.search.utm_campaign,h.ext=l.search.utm_term,h.exct=l.search.utm_content,h.prms={search:l.search,location:p,userAgent:navigator.userAgent},f.auid=e._in.session.getAppUserID();var d={public_token:e._in.token},g={session:h,app_user:f};o.log("users_post",g,o.DEBUG),s.request.post(u,d,g,function(t,n){if(t)o.error(r,t,o.USER);else{var i=n.body;if(i){o.log("Taplytics::Users.post: successfully created/updated user.",n,o.DEBUG);var s=i.app_user_id,a=i.session_id;e._in.session.setAppUserID(s),e._in.session.setSessionID(a),e._in.session.tick()}else o.error(r,null,o.USER)}return c&&c(t,n)})}},{"../../config":20,"../api":2,"../lib/location":13,"../lib/logger":14,"../lib/source":17}],6:[function(e,t,r){var n={};n.init=e("./functions/init")(n),n.isReady=e("./functions/isReady")(n),n.identify=e("./functions/identify")(n),n.track=e("./functions/track")(n),n.page=e("./functions/page")(n),n.reset=e("./functions/reset")(n),t.exports=n},{"./functions/identify":7,"./functions/init":8,"./functions/isReady":9,"./functions/page":10,"./functions/reset":11,"./functions/track":12}],7:[function(e,t,r){function n(e){return!e||e&&"object"!=typeof e?!1:!0}function i(e){var t={customData:{}},r=Object.keys(e),n=0;for(n=0;n<r.length;n++){var i=r[n],s=e[i],a=o(i);a&&a.isTopLevel?t[a.acceptedKey]=s:t.customData[i]=s}return t}function o(e){var t={user_id:["user_id","id","userID","userId","customer_id","member_id"],email:["email","email_address"],name:["name"],firstName:["first_name","firstName"],lastName:["last_name","lastName"],avatarUrl:["avatar","avatarUrl"],age:["age"],gender:["gender"]},r=Object.keys(t),n=0,i=0;for(n=0;n<r.length;n++){var o=r[n],s=t[o];if(s)for(i=0;i<s.length;i++){var a=s[i];if(a&&e&&a==e)return{isTopLevel:!0,acceptedKey:a}}}return{isTopLevel:!1}}var s=e("../lib/logger"),a=e("../api");t.exports=function(e){return function(t){if(!e.isReady())return s.error("Taplytics::identify: you have to call Taplytics.init first.",null,s.USER),!1;if(!n(t))return s.error("Taplytics::identify: you have to pass in an object with user attributes.",null,s.USER),!1;var r=i(t);return a.users.post(e,r,"Taplytics::identify: failed to save the user attributes properly."),e}}},{"../api":2,"../lib/logger":14}],8:[function(e,t,r){function n(e){return e?"string"!=typeof e?!1:e.length?!0:!1:!1}var i=e("../lib/logger"),o=e("../api"),s=(e("../lib/location"),!0);t.exports=function(t){return function(r,a){return n(r)?(t.env="production",a&&(a.log_level&&i.setPriorityLevel(a.log_level),a.auto_page_view===!1&&(s=!1),a.env&&(t.env=a.env)),t._in={},t._in.token=r,t._in.session=e("../session")(t),t._in.logger=i,t._in.session.start(),o.users.post(t,{},"Taplytics: Init failed. Taplytics will not function properly."),s&&t.page&&t.page(),o.events.scheduleTick(),t):void i.error("Taplytics: an SDK token is required.",null,i.USER)}}},{"../api":2,"../lib/location":13,"../lib/logger":14,"../session":19}],9:[function(e,t,r){e("../lib/logger"),e("../api");t.exports=function(e){return function(){return e&&e._in&&e._in.token&&e._in.session?!0:!1}}},{"../api":2,"../lib/logger":14}],10:[function(e,t,r){function n(e){var t=e.get(c.previous_page_view_date);return t&&(t=new Date(t)),{category:e.get(c.previous_page_category),name:e.get(c.previous_page_name),href:e.get(c.previous_page_href),title:e.get(c.previous_page_title),location:e.get(c.previous_page_location,JSON&&JSON.parse),view_date:t}}function i(e,t,r){e.set(c.previous_page_category,t),e.set(c.previous_page_name,r),e.set(c.previous_page_href,u.attr("href")),e.set(c.previous_page_title,u.attr("title")),e.set(c.previous_page_location,u.toObject(),JSON&&JSON.stringify),e.set(c.previous_page_view_date,(new Date).toISOString())}function o(e){e.unset(c.previous_page_category),e.unset(c.previous_page_name),e.unset(c.previous_page_href),e.unset(c.previous_page_title),e.unset(c.previous_page_location),e.unset(c.previous_page_view_date)}var s=e("../lib/logger"),a=e("../api"),u=e("../lib/location"),c={previous_page_href:"p_p_l_h",previous_page_title:"p_p_l_t",previous_page_location:"p_p_l",previous_page_name:"p_p_n",previous_page_category:"p_p_c",previous_page_view_date:"p_p_v_d"};t.exports=function(e){return function(t,r,u){if(!e.isReady())return s.error("Taplytics::track: you have to call Taplytics.init first.",null,s.USER),!1;var p=t,l=r,f=u,h=e._in.session;if("object"!=typeof r||u||(p=void 0,l=t,f=r),h.tick(),h.get(c.previous_page_href)){var d=n(h);a.events.pageClose(d.category,d.name,d.href,d.title,d.location),a.events.timeOnPage(d.category,d.name,d.href,d.title,d.location,d.view_date),o(h)}return a.events.pageView(p,l,f),i(h,p,l),e}}},{"../api":2,"../lib/location":13,"../lib/logger":14}],11:[function(e,t,r){var n=e("../lib/logger"),i=e("../api");t.exports=function(e){return function(){if(!e.isReady())return n.error("Taplytics::reset: you have to call Taplytics.init first.",null,n.USER),!1;var t=e._in.session;return t.tick(),i.users.del(e),t.deleteSessionID().deleteAppUserID(),i.users.post(e,{},"Taplytics: couldn't create a new session/user. Taplytics will not function properly."),e}}},{"../api":2,"../lib/logger":14}],12:[function(e,t,r){var n=e("../lib/logger"),i=e("../api");t.exports=function(e){return function(t,r,o){if(!e.isReady())return n.error("Taplytics::track: you have to call Taplytics.init first.",null,n.USER),!1;if(!t)return n.error("Taplytics::track: you have to specify an event name.",null,n.USER),!1;var s=r,a=o;return"object"!=typeof r||o||(s=void 0,a=r),e._in.session.tick(),i.events.goalAchieved(t,s,a),e}}},{"../api":2,"../lib/logger":14}],13:[function(e,t,r){function n(e){return i[e]?i[e]:"title"===e?document.title:document.location?document.location[e]:null}var i=(e("../lib/swizzle"),e("./logger"),{});r.toObject=function(){return{href:n("href"),hash:n("hash"),search:n("search"),host:n("host"),protocol:n("protocol"),pathname:n("pathname"),title:n("title")}},r.attr=function(e){return n(e)},r.listen=function(e){}},{"../lib/swizzle":18,"./logger":14}],14:[function(e,t,r){function n(e){return i>=e}var i=0;t.exports={DEBUG:2,LOG:1,USER:0,setPriorityLevel:function(e){i=e},log:function(e,t,r){(void 0===r||n(r))&&(console.log(e),t&&console.dir(t))},error:function(e,t,r){(void 0===r||n(r))&&(console.error(e),t&&console.dir(t))}}},{}],15:[function(e,t,r){t.exports=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}},{}],16:[function(e,t,r){function n(){var e=[];this.length=function(){return e.length},this.isEmpty=function(){return 0===e.length},this.enqueue=function(t){e.push(t)},this.enqueueAll=function(e){if(!e||e&&"array"!=typeof e)return 0;var t=0;for(t=0;t<e.length;t++){var r=e[t];this.enqueue(r)}return e.length},this.dequeue=function(){if(0==e.length)return void 0;var t=e.shift();return t},this.flush=function(){var t=e.slice();return e=[],t},this.peek=function(){return e.length>0?e[0]:void 0}}t.exports=n},{}],17:[function(e,t,r){var n=e("qs");t.exports=function(){var e={},t=null;location&&location.search&&location.search.length&&(e=n.parse(location.search.substr(1))),document&&document.referrer&&(t=document.referrer);var r={referrer:t,search:e};return r}},{qs:22}],18:[function(e,t,r){t.exports=function(e,t,r,n){if(!e)return!1;if(!t||"string"!=typeof t)return!1;if(!r||"function"!=typeof r)return!1;if(!e[t])return!1;var i=e[t];return function(n){e[t]=function(){r.apply(n,arguments),i.apply(n,arguments)}}(n),!0}},{}],19:[function(e,t,r){function n(e,t,r){var n=new Date(e);switch(t.toLowerCase()){case"year":n.setFullYear(n.getFullYear()+r);break;case"quarter":n.setMonth(n.getMonth()+3*r);break;case"month":n.setMonth(n.getMonth()+r);break;case"week":n.setDate(n.getDate()+7*r);break;case"day":n.setDate(n.getDate()+r);break;case"hour":n.setTime(n.getTime()+36e5*r);break;case"minute":n.setTime(n.getTime()+6e4*r);break;case"second":n.setTime(n.getTime()+1e3*r);break;default:n=void 0}return n}var i=e("./lib/logger"),o=e("cookies-js"),s=e("uuid");t.exports=function(e){if(!e||e&&!e._in.token)return void 0;var t={cookieSessionID:"_tl_csid_"+e._in.token,sessionUUID:"_tl_suuid_"+e._in.token,sessionID:"_tl_sid_"+e._in.token,appUserID:"_tl_auid_"+e._in.token,sessionOptions:function(t,r){return t&&r?"tl_sopts_"+e._in.token+"_"+t+"_"+r:null}},r={};return r.start=function(){return r.updateCookieSession().setSessionUUID(),r},r.tick=function(){return r.updateCookieSession(),r},r.get=function(e,n){if(!e)return void 0;r.tick();var i=r.getCookieSessionID(),s=t.sessionOptions(i,e);return s?n&&JSON&&JSON.parse?JSON.parse(o.get(s)):o.get(s):void 0},r.set=function(e,i,s){if(!e||void 0===i)return!1;r.tick();var a=r.getCookieSessionID(),u=t.sessionOptions(a,e),c=n(new Date,"minute",30),p=i;return u?(s&&JSON&&JSON.stringify&&(p=JSON.stringify(i)),o.set(u,p,{expires:c}),!0):!1},r.unset=function(e){if(!e)return!1;r.tick();var n=r.getCookieSessionID(),i=t.sessionOptions(n,e);o.expire(i)},r.updateCookieSession=function(){var e=r.getCookieSessionID();e||(e=s.v4(),r.deleteSessionID());var a=n(new Date,"minute",30);return o.set(t.cookieSessionID,e,{expires:a}),i.log("Set cookieSessionID to: "+e,{expires:a},i.DEBUG),r},r.setSessionUUID=function(){var e=r.getSessionUUID();return e||(e=s.v4()),o.set(t.sessionUUID,e),i.log("Set sessionUUID to: "+e,null,i.DEBUG),r},r.deleteSessionID=function(){return o.expire(t.sessionID),r},r.deleteAppUserID=function(){return o.expire(t.appUserID),r},r.setSessionID=function(e){return o.set(t.sessionID,e),i.log("Set sessionID to: "+e,null,i.DEBUG),r},r.setAppUserID=function(e){return o.set(t.appUserID,e),i.log("Set appUserID to: "+e,null,i.DEBUG),r},r.getSessionUUID=function(){return o.get(t.sessionUUID)},r.getCookieSessionID=function(){return o.get(t.cookieSessionID)},r.getAppUserID=function(){return o.get(t.appUserID)},r.getSessionID=function(){return o.get(t.sessionID)},r}},{"./lib/logger":14,"cookies-js":21,uuid:31}],20:[function(e,t,r){r.obj=function(){var t=e("./app/app"),r={};return"production"===t.env?r.baseAPI="https://taplytics.com/public_api/v1/":"dev"===t.env||"development"===t.env?r.baseAPI="https://dev.taplytics.com/public_api/v1/":"local"===t.env&&(r.baseAPI="http://localhost:3002/public_api/v1/"),r.eventsFlushQueueTimeout=4e3,r},r.isProduction=function(){var t=e("./app/app");return"production"===t.env}},{"./app/app":6}],21:[function(e,t,r){!function(e,n){"use strict";var i=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var t=function(e,r,n){return 1===arguments.length?t.get(e):t.set(e,r,n)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){return t._cachedDocumentCookie!==t._document.cookie&&t._renewCache(),t._cache[t._cacheKeyPrefix+e]},t.set=function(e,r,i){return i=t._getExtendedOptions(i),i.expires=t._getExpiresDate(r===n?-1:i.expires),t._document.cookie=t._generateCookieString(e,r,i),t},t.expire=function(e,r){return t.set(e,n,r)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&e.secure!==n?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,r){if(r=r||new Date,"number"==typeof e?e=e===1/0?t._maxExpireDate:new Date(r.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,r){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),r=r||{};var n=e+"="+t;return n+=r.path?";path="+r.path:"",n+=r.domain?";domain="+r.domain:"",n+=r.expires?";expires="+r.expires.toUTCString():"",n+=r.secure?";secure":""},t._getCacheFromString=function(e){for(var r={},i=e?e.split("; "):[],o=0;o<i.length;o++){var s=t._getKeyValuePairFromCookieString(i[o]);r[t._cacheKeyPrefix+s.key]===n&&(r[t._cacheKeyPrefix+s.key]=s.value)}return r},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");return t=0>t?e.length:t,{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="cookies.js",r="1"===t.set(e,1).get(e);return t.expire(e),r},t.enabled=t._areEnabled(),t},o="object"==typeof e.document?i(e):i;"function"==typeof define&&define.amd?define(function(){return o}):"object"==typeof r?("object"==typeof t&&"object"==typeof t.exports&&(r=t.exports=o),r.Cookies=o):e.Cookies=o}("undefined"==typeof window?this:window)},{}],22:[function(e,t,r){t.exports=e("./lib/")},{"./lib/":23}],23:[function(e,t,r){var n=e("./stringify"),i=e("./parse");t.exports={stringify:n,parse:i}},{"./parse":24,"./stringify":25}],24:[function(e,t,r){var n=e("./utils"),i={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};i.parseValues=function(e,t){for(var r={},i=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0,s=i.length;s>o;++o){var a=i[o],u=-1===a.indexOf("]=")?a.indexOf("="):a.indexOf("]=")+1;if(-1===u)r[n.decode(a)]="";else{var c=n.decode(a.slice(0,u)),p=n.decode(a.slice(u+1));if(Object.prototype.hasOwnProperty(c))continue;r[c]=r.hasOwnProperty(c)?[].concat(r[c]).concat(p):p}}return r},i.parseObject=function(e,t,r){if(!e.length)return t;var n=e.shift(),o={};if("[]"===n)o=[],o=o.concat(i.parseObject(e,t,r));else{var s="["===n[0]&&"]"===n[n.length-1]?n.slice(1,n.length-1):n,a=parseInt(s,10),u=""+a;!isNaN(a)&&n!==s&&u===s&&a>=0&&a<=r.arrayLimit?(o=[],o[a]=i.parseObject(e,t,r)):o[s]=i.parseObject(e,t,r)}return o},i.parseKeys=function(e,t,r){if(e){var n=/^([^\[\]]*)/,o=/(\[[^\[\]]*\])/g,s=n.exec(e);if(!Object.prototype.hasOwnProperty(s[1])){var a=[];s[1]&&a.push(s[1]);for(var u=0;null!==(s=o.exec(e))&&u<r.depth;)++u,Object.prototype.hasOwnProperty(s[1].replace(/\[|\]/g,""))||a.push(s[1]);return s&&a.push("["+e.slice(s.index)+"]"),i.parseObject(a,t,r)}}},t.exports=function(e,t){if(""===e||null===e||"undefined"==typeof e)return{};t=t||{},t.delimiter="string"==typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:i.delimiter,t.depth="number"==typeof t.depth?t.depth:i.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:i.arrayLimit,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:i.parameterLimit;for(var r="string"==typeof e?i.parseValues(e,t):e,o={},s=Object.keys(r),a=0,u=s.length;u>a;++a){var c=s[a],p=i.parseKeys(c,r[c],t);o=n.merge(o,p)}return n.compact(o)}},{"./utils":26}],25:[function(e,t,r){var n=e("./utils"),i={delimiter:"&",arrayPrefixGenerators:{brackets:function(e,t){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e,t){return e}}};i.stringify=function(e,t,r){if(n.isBuffer(e)?e=e.toString():e instanceof Date?e=e.toISOString():null===e&&(e=""),"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return[encodeURIComponent(t)+"="+encodeURIComponent(e)];var o=[];if("undefined"==typeof e)return o;for(var s=Object.keys(e),a=0,u=s.length;u>a;++a){var c=s[a];o=o.concat(Array.isArray(e)?i.stringify(e[c],r(t,c),r):i.stringify(e[c],t+"["+c+"]",r))}return o},t.exports=function(e,t){t=t||{};var r="undefined"==typeof t.delimiter?i.delimiter:t.delimiter,n=[];if("object"!=typeof e||null===e)return"";var o;o=t.arrayFormat in i.arrayPrefixGenerators?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":"indices";for(var s=i.arrayPrefixGenerators[o],a=Object.keys(e),u=0,c=a.length;c>u;++u){var p=a[u];n=n.concat(i.stringify(e[p],p,s))}return n.join(r)}},{"./utils":26}],26:[function(e,t,r){r.arrayToObject=function(e){for(var t={},r=0,n=e.length;n>r;++r)"undefined"!=typeof e[r]&&(t[r]=e[r]);return t},r.merge=function(e,t){if(!t)return e;if("object"!=typeof t)return Array.isArray(e)?e.push(t):e[t]=!0,e;if("object"!=typeof e)return e=[e].concat(t);Array.isArray(e)&&!Array.isArray(t)&&(e=r.arrayToObject(e));for(var n=Object.keys(t),i=0,o=n.length;o>i;++i){var s=n[i],a=t[s];e[s]=e[s]?r.merge(e[s],a):a}return e},r.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},r.compact=function(e,t){if("object"!=typeof e||null===e)return e;t=t||[];var n=t.indexOf(e);if(-1!==n)return t[n];if(t.push(e),Array.isArray(e)){for(var i=[],o=0,s=e.length;s>o;++o)"undefined"!=typeof e[o]&&i.push(e[o]);return i}var a=Object.keys(e);for(o=0,s=a.length;s>o;++o){var u=a[o];e[u]=r.compact(e[u],t)}return e},r.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},r.isBuffer=function(e){return null===e||"undefined"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},{}],27:[function(e,t,r){function n(){}function i(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(e){return e===Object(e)}function s(e){if(!o(e))return e;var t=[];for(var r in e)null!=e[r]&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}function a(e){for(var t,r,n={},i=e.split("&"),o=0,s=i.length;s>o;++o)r=i[o],t=r.split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return n}function u(e){var t,r,n,i,o=e.split(/\r?\n/),s={};o.pop();for(var a=0,u=o.length;u>a;++a)r=o[a],t=r.indexOf(":"),n=r.slice(0,t).toLowerCase(),i=y(r.slice(t+1)),s[n]=i;return s}function c(e){return e.split(/ *; */).shift()}function p(e){return g(e.split(/ *; */),function(e,t){var r=t.split(/ *= */),n=r.shift(),i=r.shift();return n&&i&&(e[n]=i),e},{})}function l(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function f(e,t){var r=this;d.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new l(r)}catch(n){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=n,r.callback(e)}if(r.emit("response",t),e)return r.callback(e,t);if(t.status>=200&&t.status<300)return r.callback(e,t);var i=new Error(t.statusText||"Unsuccessful HTTP response");i.original=e,i.response=t,i.status=t.status,r.callback(e||i,t)})}function h(e,t){return"function"==typeof t?new f("GET",e).end(t):1==arguments.length?new f("GET",e):new f(e,t)}var d=e("emitter"),g=e("reduce"),v="undefined"==typeof window?this:window;h.getXHR=function(){if(v.XMLHttpRequest&&("file:"!=v.location.protocol||!v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var y="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};h.serializeObject=s,h.parseString=a,h.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},h.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},l.prototype.get=function(e){return this.header[e.toLowerCase()]},l.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=c(t);var r=p(t);for(var n in r)this[n]=r[n]},l.prototype.parseBody=function(e){var t=h.parse[this.type];return t&&e&&(e.length||e instanceof Object)?t(e):null},l.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e||1223==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},l.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",i=new Error(n);return i.status=this.status,i.method=t,i.url=r,i},h.Response=l,d(f.prototype),f.prototype.use=function(e){return e(this),this},f.prototype.timeout=function(e){return this._timeout=e,this},f.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},f.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},f.prototype.set=function(e,t){if(o(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},f.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},f.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},f.prototype.type=function(e){return this.set("Content-Type",h.types[e]||e),this},f.prototype.accept=function(e){return this.set("Accept",h.types[e]||e),this},f.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},f.prototype.query=function(e){return"string"!=typeof e&&(e=s(e)),e&&this._query.push(e),this},f.prototype.field=function(e,t){return this._formData||(this._formData=new v.FormData),this._formData.append(e,t),this},f.prototype.attach=function(e,t,r){return this._formData||(this._formData=new v.FormData),this._formData.append(e,t,r),this},f.prototype.send=function(e){var t=o(e),r=this.getHeader("Content-Type");if(t&&o(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||i(e)?this:(r||this.type("json"),this)},f.prototype.callback=function(e,t){var r=this._callback;this.clearTimeout(),r(e,t)},f.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},f.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},f.prototype.withCredentials=function(){return this._withCredentials=!0,this},f.prototype.end=function(e){var t=this,r=this.xhr=h.getXHR(),o=this._query.join("&"),s=this._timeout,a=this._formData||this._data;this._callback=e||n,r.onreadystatechange=function(){if(4==r.readyState){var e;try{e=r.status}catch(n){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=function(e){e.percent=e.loaded/e.total*100,t.emit("progress",e)})}catch(u){}if(s&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},s)),o&&(o=h.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!i(a)){var c=h.serialize[this.getHeader("Content-Type")];c&&(a=c(a))}for(var p in this.header)null!=this.header[p]&&r.setRequestHeader(p,this.header[p]);return this.emit("request",this),r.send(a),this},h.Request=f,h.get=function(e,t,r){var n=h("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},h.head=function(e,t,r){var n=h("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.del=function(e,t){var r=h("DELETE",e);return t&&r.end(t),r},h.patch=function(e,t,r){var n=h("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.post=function(e,t,r){var n=h("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.put=function(e,t,r){var n=h("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},t.exports=h},{emitter:28,reduce:29}],28:[function(e,t,r){function n(e){return e?i(e):void 0}function i(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],29:[function(e,t,r){t.exports=function(e,t,r){for(var n=0,i=e.length,o=3==arguments.length?r:e[n++];i>n;)o=t.call(null,o,e[n],++n,e);return o}},{}],30:[function(e,t,r){(function(e){var r;if(e.crypto&&crypto.getRandomValues){var n=new Uint8Array(16);r=function(){return crypto.getRandomValues(n),n}}if(!r){var i=new Array(16);r=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(e,t,r){function n(e,t,r){var n=t&&r||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>i&&(t[n+i++]=c[e])});16>i;)t[n+i++]=0;return t}function i(e,t){var r=t||0,n=u;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}function o(e,t,r){var n=t&&r||0,o=t||[];e=e||{};var s=void 0!==e.clockseq?e.clockseq:h,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:g+1,c=a-d+(u-g)/1e4;if(0>c&&void 0===e.clockseq&&(s=s+1&16383),(0>c||a>d)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=a,g=u,h=s,a+=122192928e5;var p=(1e4*(268435455&a)+u)%4294967296;o[n++]=p>>>24&255,o[n++]=p>>>16&255,o[n++]=p>>>8&255,o[n++]=255&p;var l=a/4294967296*1e4&268435455;o[n++]=l>>>8&255,o[n++]=255&l,o[n++]=l>>>24&15|16,o[n++]=l>>>16&255,o[n++]=s>>>8|128,
o[n++]=255&s;for(var v=e.node||f,y=0;6>y;y++)o[n+y]=v[y];return t?t:i(o)}function s(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;16>s;s++)t[n+s]=o[s];return t||i(o)}for(var a=e("./rng"),u=[],c={},p=0;256>p;p++)u[p]=(p+256).toString(16).substr(1),c[u[p]]=p;var l=a(),f=[1|l[0],l[1],l[2],l[3],l[4],l[5]],h=16383&(l[6]<<8|l[7]),d=0,g=0,v=s;v.v1=o,v.v4=s,v.parse=n,v.unparse=i,t.exports=v},{"./rng":30}]},{},[1]);