!function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){var r=e[s][1][t];return i(r?r:t)},f,f.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){r.request=t("./api/base"),r.users=t("./api/users"),r.events=t("./api/events"),r.config=t("./api/config"),r.init=function(t){return!!(t&&t._in&&t._in.token)&&this.request.setPublicToken(t._in.token)}},{"./api/base":2,"./api/config":3,"./api/events":4,"./api/users":5}],2:[function(t,e,r){function n(t,e,r){var n=h(e),i=f(t);d.log("GET request: "+i,n,d.LOUD),p.get(i).query(n.query).timeout(T).end(a(i,r))}function i(t,e,r,n){var i=h(e,r),o=f(t);d.log("POST request: "+o,i,d.LOUD),p.post(o).query(i.query).set("Content-Type","application/base64+json").send(i.payload).end(a(o,n))}function o(t,e,r,n){var i=h(e,r),o=f(t);d.log("DELETE request: "+o,i,d.LOUD),p.del(o).query(i.query).set("Content-Type","application/base64+json").timeout(T).send(i.payload).end(a(o,n))}function s(t){this.publicToken=t}function a(t,e){return function(r,n){r&&d.error("Error: "+t,r,d.DEBUG),e&&"function"==typeof e&&e(r,n),c()}}function u(t){return function(){b.enqueue({requestFunction:t,args:arguments}),w||c()}}function c(){if(!b.isEmpty()){w=!0;var t=b.dequeue();return d.log("Processing request",t,d.DEBUG),t&&t.requestFunction&&t.requestFunction.apply(r,t.args)}w=!1}function f(t,e){return g.obj().baseAPI+(t||"")+l(e)}function l(t){return t?"?"+y.stringify(t):""}function h(t,e){var n={},i={};return n=t&&"function"==typeof t?t():t,i=e&&"function"==typeof e?e():e,n.r_v="1",m&&m.encode&&JSON&&JSON.stringify?i=m.encode(JSON.stringify(i)):n.r_v="0",r.publicToken&&(n.public_token=r.publicToken),{query:n,payload:i}}var p=t("superagent"),g=t("../../config"),d=t("../lib/logger"),v=t("../lib/queue"),y=t("qs"),m=t("js-base64").Base64,b=new v,w=!1,_=u(i),E=u(n),A=u(o);r.publicToken=null,r.setPublicToken=s,r.get=E,r.post=_,r.del=A;var S=1e3,U=3e4,T=4e3;r.setTimeout=function(t){var e=1e3*t;e>U?(d.error("Timeout is larger then max timeout! timeout: "+t+"s, max timeout: "+U/1e3+"s. Using max timeout value.",null,d.USER),T=U):e<S?(d.error("Timeout is smaller then the min timeout! timeout: "+t+"s, min timeout: "+S/1e3+"s. Using min timeout value.",null,d.USER),T=S):(d.log("Set timeout: "+t+"s",null,d.LOUD),T=e)}},{"../../config":28,"../lib/logger":20,"../lib/queue":22,"js-base64":36,qs:38,superagent:44}],3:[function(t,e,r){var n=t("./base"),i=t("../lib/logger"),o=t("../lib/session"),s=t("./events");r.get=function(t){var e=new Date,r=o.getSessionAttributes();r.auid=o.getAppUserID(),r.prms&&(r.prms=JSON.stringify(r.prms)),o.test_experiments&&(r.uev=JSON.stringify(o.test_experiments)),i.log("config_get",r,i.DEBUG),n.get("config",r,function(r,n){if(r)i.error("Failed to get config",r,i.DEBUG),o.saveSessionConfig(null);else{var a=n.body;o.saveSessionConfig(a),a?(s.clientConfig(e),i.time("config.get: successfully got session config data",n,e,i.DEBUG)):i.error("No config data in response",null,i.DEBUG)}return t&&t(r,n)})}},{"../lib/logger":20,"../lib/session":23,"./base":2,"./events":4}],4:[function(t,e,r){function n(t){return{type:t,date:(new Date).toISOString(),tvKey:f.attr("title"),tvCl:f.attr("href"),prod:a.isProduction()?1:0,data:{_tl_view:f.toObject()}}}function i(){if(u.log("events.flushQueue: tick.",g,u.LOUD),g.isEmpty()||!h.hasLoadedData)return r.scheduleTick();var t=g.flush(),e=h.getSessionID();e||s.post({},"Taplytics::events.flushQueue: failed to create sessions. Events will fail to process."),this.post(t,function(e,n){e&&g.enqueueAll(t),r.scheduleTick()})}var o=t("./base"),s=t("./users"),a=t("../../config"),u=t("../lib/logger"),c=t("../lib/merge"),f=t("../lib/location"),l=t("../lib/queue"),h=t("../lib/session"),p="events",g=new l,d={active:"appActive",config:"tlClientConfig",goal:"goalAchieved",pageView:"viewAppeared",pageClose:"viewDisappeared",timeOnPage:"viewTimeOnPage"};r.types=d,r.timeOnPage=function(t,e,r,i,o,s){var a=n(d.timeOnPage);if(s&&s.getTime){var u=(new Date).getTime(),f=s.getTime(),l=(u-f)/1e3;a.val=l}return a.vKey=e,a.tKey=t,a.tvKey=i,a.tvCl=r,o&&(a.data=c(a.data||{},{_tl_view:o})),g.enqueue(a)},r.scheduleTick=function(){var t=i.bind(this);setTimeout(t,a.obj().eventsFlushQueueTimeout)},r.pageClose=function(t,e,r,i,o){var s=n(d.pageClose);return s.val=(new Date).toISOString(),s.vKey=e,s.tKey=t,s.tvKey=i,s.tvCl=r,o&&(s.data=c(s.data||{},{_tl_view:o})),g.enqueue(s)},r.pageView=function(t,e,r){var i=n(d.pageView);return r&&(i.data=c(i.data,r)),i.val=(new Date).toISOString(),i.vKey=e,i.tKey=t,g.enqueue(i)},r.goalAchieved=function(t,e,r){var i=n(d.goal);return r&&(i.data=c(i.data,r)),e&&(i.val=e),i.gn=t,g.enqueue(i)},r.appActive=function(){var t=n(d.active);return g.enqueue(t)},r.clientConfig=function(t){if(t){var e=n(d.config),r=new Date;return e.value=(r.getTime()-t.getTime())/1e3,g.enqueue(e)}},r.post=function(t,e){var r=new Date,n={},i=function(e){var r={};r.sid=h.getSessionID();var n={session:r,events:t};return n};o.post(p,n,i,function(t,n){return t?u.error("Taplytics::events.post: failed to log events",t,u.LOG):u.time("Taplytics::events.post: succesfully logged events.",n,r,u.DEBUG),e&&e(t,n)})}},{"../../config":28,"../lib/location":19,"../lib/logger":20,"../lib/merge":21,"../lib/queue":22,"../lib/session":23,"./base":2,"./users":5}],5:[function(t,e,r){var n=t("./base"),i=(t("../lib/source"),t("../lib/logger")),o=t("../lib/session");r.users_path="users",r.del=function(t){o.sessionConfigPromise(function(){var e=o.getAppUserID();if(e){var s={};s.sid=o.getSessionID(),s.ad=o.getSessionUUID();var a={},u={session:s};i.log("users_del",u,i.DEBUG),n.del(r.users_path+"/"+e,a,u,function(e,r){return e?i.error("Couldn't properly rest user.",r,i.DEBUG):i.log("Successfully reset the user.",r,i.DEBUG),t&&t(e,r)})}})},r.post=function(t,e,s){o.sessionConfigPromise(function(){var a=t,u=o.getSessionAttributes();a||(a={}),a.auid=o.getAppUserID();var c=new Date,f={session:u,app_user:a};i.log("users_post",f,i.DEBUG),n.post(r.users_path,{},f,function(t,r){if(t)i.error(e,t,i.USER);else{var n=r.body;n?(i.time("Users.post: successfully created/updated user.",r,c,i.DEBUG),o.setAppUserID(n.app_user_id),o.setSessionID(n.session_id),o.tick()):i.error(e,null,i.USER)}return s&&s(t,r)})})}},{"../lib/logger":20,"../lib/session":23,"../lib/source":24,"./base":2}],6:[function(t,e,r){var n=t("./base"),i=t("../lib/logger");t("../lib/session");r.post=function(t,e){if(!t)return i.error("No new variable to post to server",null,i.DEBUG);var r=new Date,o={name:t.name,createdAt:new Date,variableType:t.defaultType,defaultVal:t.stringifyValue?t.stringifyValue(t.defaultValue):t.defaultValue};i.log("variable_post",o,i.DEBUG),n.post("variable",{},o,function(t,n){if(t)i.error("Failed to post variable",t,i.DEBUG);else{var o=n.body;o&&o.name&&i.time("Users.post: successfully created new variable.",o,r,i.DEBUG)}return e&&e(t)})}},{"../lib/logger":20,"../lib/session":23,"./base":2}],7:[function(t,e,r){var n={};n.api=t("./api"),n.init=t("./functions/init"),n.isReady=t("./functions/isReady"),n.identify=t("./functions/identify"),n.track=t("./functions/track"),n.page=t("./functions/page"),n.reset=t("./functions/reset"),n.propertiesLoaded=t("./functions/propertiesLoaded"),n.runningExperiments=t("./functions/runningExperiments"),n.variable=t("./functions/variable"),n.codeBlock=t("./functions/codeBlock"),e.exports=n},{"./api":1,"./functions/codeBlock":8,"./functions/identify":9,"./functions/init":10,"./functions/isReady":11,"./functions/page":12,"./functions/propertiesLoaded":13,"./functions/reset":14,"./functions/runningExperiments":15,"./functions/track":16,"./functions/variable":17}],8:[function(t,e,r){var n=t("../lib/logger"),i=t("../lib/session"),o=t("../api/variable");e.exports=function(t,e){return t?void i.sessionConfigPromise(function(){var r=i.config;if(r){var s=r.dynamicVars?r.dynamicVars[t]:null;if(s){if("Code Block"!==s.variableType)return n.error("Taplytics code block "+t+" default type does not match server: "+s.variableType,null,n.LOG);e&&s.value&&e()}else n.log("New Taplytics Code Block: "+t,null,n.DEBUG),o.post({name:t,defaultType:"Code Block",defaultValue:!1})}}):n.error("No name to run code block",null,n.USER)}},{"../api/variable":6,"../lib/logger":20,"../lib/session":23}],9:[function(t,e,r){function n(t){return!(!t||t&&"object"!=typeof t)}function i(t){var e={customData:{}},r=Object.keys(t),n=0;for(n=0;n<r.length;n++){var i=r[n],s=t[i],a=o(i);a&&a.isTopLevel?e[a.acceptedKey]=s:e.customData[i]=s}return e}function o(t){var e={user_id:["user_id","id","userID","userId","customer_id","member_id"],email:["email","email_address"],name:["name"],firstName:["first_name","firstName"],lastName:["last_name","lastName"],avatarUrl:["avatar","avatarUrl","avatar_url"],age:["age"],gender:["gender"]},r=Object.keys(e),n=0,i=0;for(n=0;n<r.length;n++){var o=r[n],s=e[o];if(s)for(i=0;i<s.length;i++){var a=s[i];if(a&&t&&a==t)return{isTopLevel:!0,acceptedKey:a}}}return{isTopLevel:!1}}var s=t("../lib/logger");e.exports=function(t){if(!this.isReady())return s.error("Taplytics::identify: you have to call Taplytics.init first.",null,s.USER),this;if(!n(t))return s.error("Taplytics::identify: you have to pass in an object with user attributes.",null,s.USER),this;var e=i(t);return this.api.users.post(e,"Taplytics::identify: failed to save the user attributes properly."),this}},{"../lib/logger":20}],10:[function(t,e,r){function n(t){return!(!t||"string"!=typeof t)&&!!t.length}var i=t("../lib/logger"),o=(t("../lib/location"),t("../lib/session")),s=t("../lib/cookies"),a=t("../lib/tools"),u=!0;e.exports=function(t,e){return n(t)?(this.env="production",e&&(a.isNumber(e.log_level)&&i.setPriorityLevel(e.log_level),e.auto_page_view===!1&&(u=!1),e.env&&(this.env=e.env),e.test_experiments&&(o.test_experiments=e.test_experiments),a.isNumber(e.timeout)&&this.api.request.setTimeout(e.timeout)),this._in={},this._in.token=t,this._in.logger=i,this._in.cookies=s,this.api.init(this),o.start(),this.api.config.get(),u&&this.page&&this.page(),this.api.events.scheduleTick(),this.api.events.appActive(),this):void i.error("An SDK token is required.",null,i.USER)}},{"../lib/cookies":18,"../lib/location":19,"../lib/logger":20,"../lib/session":23,"../lib/tools":26}],11:[function(t,e,r){t("../api");e.exports=function(){return!(!this._in||!this._in.token)}},{"../api":1}],12:[function(t,e,r){function n(){var t=u.get(c.previous_page_view_date);return t&&(t=new Date(t)),{category:u.get(c.previous_page_category),name:u.get(c.previous_page_name),href:u.get(c.previous_page_href),title:u.get(c.previous_page_title),location:u.get(c.previous_page_location,JSON&&JSON.parse),view_date:t}}function i(t,e){u.set(c.previous_page_category,t),u.set(c.previous_page_name,e),u.set(c.previous_page_href,a.attr("href")),u.set(c.previous_page_title,a.attr("title")),u.set(c.previous_page_location,a.toObject(),JSON&&JSON.stringify),u.set(c.previous_page_view_date,(new Date).toISOString())}function o(){u.unset(c.previous_page_category),u.unset(c.previous_page_name),u.unset(c.previous_page_href),u.unset(c.previous_page_title),u.unset(c.previous_page_location),u.unset(c.previous_page_view_date)}var s=t("../lib/logger"),a=t("../lib/location"),u=t("../lib/session"),c={previous_page_href:"p_p_l_h",previous_page_title:"p_p_l_t",previous_page_location:"p_p_l",previous_page_name:"p_p_n",previous_page_category:"p_p_c",previous_page_view_date:"p_p_v_d"};e.exports=function(t,e,r){if(!this.isReady())return s.error("track: you have to call Taplytics.init first.",null,s.USER),this;var a=t,f=e,l=r;if("object"!=typeof e||r?t&&!e&&(a=void 0,f=t):(a=void 0,f=t,l=e),u.tick(),u.get(c.previous_page_href)){var h=n();this.api.events.pageClose(h.category,h.name,h.href,h.title,h.location),this.api.events.timeOnPage(h.category,h.name,h.href,h.title,h.location,h.view_date),o()}return this.api.events.pageView(a,f,l),i(a,f),this}},{"../lib/location":19,"../lib/logger":20,"../lib/session":23}],13:[function(t,e,r){var n=t("../lib/session");e.exports=function(t){n.sessionConfigPromise(t)}},{"../lib/session":23}],14:[function(t,e,r){var n=t("../lib/logger"),i=t("../lib/session");e.exports=function(){return this.isReady()?(i.tick(),this.api.users.del(),i.resetSession(),this.api.config.get(),this):(n.error("Taplytics::reset: you have to call Taplytics.init first.",null,n.USER),!1)}},{"../lib/logger":20,"../lib/session":23}],15:[function(t,e,r){var n=t("../lib/session");e.exports=function(t){n.sessionConfigPromise(function(){var e=n.config&&n.config.expVarsNames?n.config.expVarsNames:{};return t&&t(e)})}},{"../lib/session":23}],16:[function(t,e,r){var n=t("../lib/logger"),i=t("../lib/session"),o=t("../lib/tools");e.exports=function(t,e,r){if(!this.isReady())return n.error("track: you have to call Taplytics.init first.",null,n.USER),!1;if(!t)return n.error("track: you have to specify an event name.",null,n.USER),!1;var s=e,a=r;return o.isObjectLike(e)&&!r&&(s=void 0,a=e),s&&!o.isNumber(s)?(n.error("track: if you're passing a value, it has to be a number.",null,n.USER),!1):(i.tick(),this.api.events.goalAchieved(t,s,a),this)}},{"../lib/logger":20,"../lib/session":23,"../lib/tools":26}],17:[function(t,e,r){var n=(t("../lib/session"),t("../tlVariable/tlVariable"));e.exports=function(t,e,r){var i=new n(t,e,r);return i&&i.init?i:null}},{"../lib/session":23,"../tlVariable/tlVariable":27}],18:[function(t,e,r){function n(){var t=new a;if(document.cookie&&document.cookie.length)for(var e,r=document.cookie.split(";"),n=0;n<r.length;n++){for(e=r[n];" "==e.charAt(0);)e=e.substring(1);t.setCookies(e)}return t}function i(t,e,r){var n=t;e&&(n+="="+e);var i=new u(n);return r&&(i.expiration_date=r),i}function o(){var t=!0;do{var e="gCStest="+Math.floor(1e8*Math.random());if(document.cookie=t?e+";expires=Tue, 01-Jan-2030 00:00:00 GMT":e,document.cookie.indexOf(e)!==-1)return document.cookie=e+";expires=Sat, 01-Jan-2000 00:00:00 GMT",t}while(!(t=!t));return null}var s=t("./logger"),a=t("cookiejar").CookieJar,u=t("cookiejar").Cookie,c=t("cookiejar").CookieAccessInfo,f=t("lscache"),l=new c;r.get=function(t){if(o()){var e=n(),r=e.getCookie(t,l);if(!r)return;return r.value}var i=f.get(t);return s.log("Got local storage key: "+t+" with value: "+i,s.DEBUG),i},r.set=function(t,e,r){if(t)if(o()){e=e||"",r=r||{};var n=i(t,e,r.expires),a=n.toString();document.cookie=a,s.log("Setting cookies to:",a,s.DEBUG)}else{var u=null;r&&r.expires&&(u=30),f.set(t,e,u),s.log("Setting local storage key: "+t+" to value: "+e,s.DEBUG)}},r.expire=function(t){o()?r.set(t,"-",{expires:new Date}):(s.log("Deleting local storage key: "+t,s.DEBUG),f.remove(t))}},{"./logger":20,cookiejar:34,lscache:37}],19:[function(t,e,r){function n(t){return i[t]?i[t]:"title"===t?document.title:document.location?document.location[t]:null}var i=(t("../lib/swizzle"),t("./logger"),{});r.toObject=function(){return{href:n("href"),hash:n("hash"),search:n("search"),host:n("host"),protocol:n("protocol"),pathname:n("pathname"),title:n("title")}},r.attr=function(t){return n(t)},r.listen=function(t){}},{"../lib/swizzle":25,"./logger":20}],20:[function(t,e,r){function n(t){return i>=t}var i=0;r.LOUD=3,r.DEBUG=2,r.LOG=1,r.USER=0,r.setPriorityLevel=function(t){i=t},r.log=function(t,e,r){(void 0===r||n(r))&&(console.log("[Taplytics]",t),e&&console.dir(e))},r.time=function(t,e,i,o){if(void 0===o||n(o)){if(i){var s=new Date,a=s.getTime()-i.getTime();t=t+", time: "+a+"ms"}r.log(t,e,o)}},r.error=function(t,e,r){(void 0===r||n(r))&&(console.error("[Taplytics]",t),e&&console.dir(e))}},{}],21:[function(t,e,r){e.exports=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}},{}],22:[function(t,e,r){function n(){var t=[];this.length=function(){return t.length},this.isEmpty=function(){return 0===t.length},this.enqueue=function(e){t.push(e)},this.enqueueAll=function(t){if(!t||t&&"array"!=typeof t)return 0;var e=0;for(e=0;e<t.length;e++){var r=t[e];this.enqueue(r)}return t.length},this.dequeue=function(){if(0!=t.length){var e=t.shift();return e}},this.flush=function(){var e=t.slice();return t=[],e},this.peek=function(){return t.length>0?t[0]:void 0}}e.exports=n},{}],23:[function(t,e,r){function n(t,e,r){var n=new Date(t);switch(e.toLowerCase()){case"year":n.setFullYear(n.getFullYear()+r);break;case"quarter":n.setMonth(n.getMonth()+3*r);break;case"month":n.setMonth(n.getMonth()+r);break;case"week":n.setDate(n.getDate()+7*r);break;case"day":n.setDate(n.getDate()+r);break;case"hour":n.setTime(n.getTime()+36e5*r);break;case"minute":n.setTime(n.getTime()+6e4*r);break;case"second":n.setTime(n.getTime()+1e3*r);break;default:n=void 0}return n}var i=t("./cookies"),o=t("uuid"),s=t("./logger"),a=t("../../config"),u=t("../lib/source"),c=t("../lib/location"),f={cookieSessionID:"_tl_csid",sessionUUID:"_tl_suuid",sessionID:"_tl_sid",appUserID:"_tl_auid",sessionOptions:function(t,e){return t&&e?"tl_sopts_"+t+"_"+e:null}};r.data={},r.hasLoadedData=!1,r.start=function(){return r.updateCookieSession().setSessionUUID(),r},r.get=function(t,e){if(t){r.tick();var n=r.getCookieSessionID(),o=f.sessionOptions(n,t);if(o){if(!(e&&JSON&&JSON.parse))return i.get(o);var a=i.get(o);if(a&&"object"==typeof a)return a;try{return JSON.parse(a)}catch(u){return s.error("Session.get("+t+") failed to parse JSON.",u,s.DEBUG),a}}}},r.tick=function(){return r.updateCookieSession(),r},r.set=function(t,e,o){if(!t||void 0===e||0===(""+e).length)return!1;r.tick();var s=r.getCookieSessionID(),a=f.sessionOptions(s,t),u=n(new Date,"minute",30),c=e;return!!a&&(o&&JSON&&JSON.stringify&&(c=JSON.stringify(e)),i.set(a,c,{expires:u}),!0)},r.unset=function(t){if(!t)return!1;r.tick();var e=r.getCookieSessionID(),n=f.sessionOptions(e,t);i.expire(n)},r.updateCookieSession=function(){var t=r.getCookieSessionID();t||(t=o.v4(),r.deleteSessionID());var e=n(new Date,"minute",30);return i.set(f.cookieSessionID,t,{expires:e}),s.log("Set cookieSessionID to: "+t,{expires:e},s.DEBUG),r},r.setSessionUUID=function(){var t=r.getSessionUUID();return t||(t=o.v4()),i.set(f.sessionUUID,t),s.log("Set sessionUUID to: "+t,null,s.DEBUG),r},r.deleteSessionID=function(){return i.expire(f.sessionID),r},r.deleteAppUserID=function(){return i.expire(f.appUserID),r},r.setSessionID=function(t){return i.set(f.sessionID,t),s.log("Set sessionID to: "+t,null,s.DEBUG),r},r.setAppUserID=function(t){return i.set(f.appUserID,t),s.log("Set appUserID to: "+t,null,s.DEBUG),r},r.getSessionUUID=function(){return i.get(f.sessionUUID)},r.getCookieSessionID=function(){return i.get(f.cookieSessionID)},r.getAppUserID=function(){return i.get(f.appUserID)},r.getSessionID=function(){return i.get(f.sessionID)},r.getSessionAttributes=function(t){t=t||{};var e=c.toObject(),r=u();return t.sid=this.getSessionID(),t.ad=this.getSessionUUID(),t.adt="browser",t.ct="browser",t.lv=a.isProduction()?"0":"1",t.sdk=a.sdkVersion,t.rfr=r.referrer,t.exm=r.search.utm_medium,t.exs=r.search.utm_source,t.exc=r.search.utm_campaign,t.ext=r.search.utm_term,t.exct=r.search.utm_content,t.prms={search:r.search,location:e},navigator&&navigator.userAgent&&(t.prms.userAgent=navigator.userAgent),t},r.saveSessionConfig=function(t){r.config=t,t&&(r.hasLoadedData=!0,r.setAppUserID(t.app_user_id),r.setSessionID(t.session_id),r.tick());for(var e=0,e=0;e<r.sessionConfigPromises.length;e++){var n=r.sessionConfigPromises[e];n&&n(!!t)}r.sessionConfigPromises=[]},r.sessionConfigPromises=[],r.sessionConfigPromise=function(t){if(t)return r.hasLoadedData&&r.data?t(!0):void r.sessionConfigPromises.push(t)},r.resetSession=function(){r.deleteSessionID(),r.deleteAppUserID(),r.data=null,r.hasLoadedData=!1}},{"../../config":28,"../lib/location":19,"../lib/source":24,"./cookies":18,"./logger":20,uuid:49}],24:[function(t,e,r){var n=t("qs");e.exports=function(){var t={},e=null;location&&location.search&&location.search.length&&(t=n.parse(location.search.substr(1))),document&&document.referrer&&(e=document.referrer);var r={referrer:e,search:t};return r}},{qs:38}],25:[function(t,e,r){e.exports=function(t,e,r,n){if(!t)return!1;if(!e||"string"!=typeof e)return!1;if(!r||"function"!=typeof r)return!1;if(!t[e])return!1;var i=t[e];return function(n){t[e]=function(){r.apply(n,arguments),i.apply(n,arguments)}}(n),!0}},{}],26:[function(t,e,r){r.isNumber=function(t){var e="[object Number]",n=Object.prototype.toString;return"number"==typeof t||r.isObjectLike(t)&&n.call(t)==e},r.isObjectLike=function(t){return!!t&&"object"==typeof t}},{}],27:[function(t,e,r){function n(t,e,r){return this.init=!1,t?(this.name=t,this.defaultValue=e,this.value=e,this.updatedBlock=r,this.defaultType=this.getValueType(e),this.defaultType?(this.init=!0,void this.getValueFromConfig()):i.log("Error: Taplytics variables only support Strings, Numbers, and Booleans.",null,i.USER)):i.log("Error: Taplytics variable is missing a name",null,i.USER)}var i=t("../lib/logger"),o=t("../lib/session"),s=t("../api/variable");n.prototype.getValueType=function(t){return"string"==typeof t?"String":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"object"==typeof t?"JSON":null},n.prototype.stringifyValue=function(t){return"JSON"===this.defaultType?JSON.stringify(t):t},n.prototype.parseValue=function(t){if("JSON"===this.defaultType){if("object"==typeof t)return t;try{return JSON.parse(t)}catch(e){i.log("Error parsing JSON variable",t,i.LOG)}return nil}return t},n.prototype.getValueFromConfig=function(){var t=this;o.sessionConfigPromise(function(){var e=o.config,r=e&&e.dynamicVars?e.dynamicVars[t.name]:null;if(r){if(r.variableType!==t.defaultType)return i.error("Taplytics variable "+t.name+" default type does not match server: "+r.variableType,null,i.LOG);t.value=t.parseValue(r.value)}else e&&(i.log("New Taplytics Variable: "+t.name,null,i.DEBUG),s.post(t));t.updatedBlock&&t.updatedBlock(t.value)})},e.exports=n},{"../api/variable":6,"../lib/logger":20,"../lib/session":23}],28:[function(t,e,r){r.obj=function(){var e=t("./app/app"),r={};return"production"===e.env?r.baseAPI="https://api.taplytics.com/public_api/v1/":"dev"===e.env||"development"===e.env?r.baseAPI="https://dev.taplytics.com/public_api/v1/":"stag"===e.env||"staging"===e.env?r.baseAPI="https://staging.taplytics.com/public_api/v1/":"local"===e.env&&(r.baseAPI="http://localhost:3002/public_api/v1/"),r.eventsFlushQueueTimeout=4e3,r.functionFlushQueueTimeout=500,r.sdkVersion="1.1.0",r},r.isProduction=function(){var e=t("./app/app");return"production"===e.env}},{"./app/app":7}],29:[function(t,e,r){var n=t("./app"),i=t("./lib/logger"),o=t("../config");r.Taplytics=window.Taplytics=e.exports=n,r.flushAppQueue=function(){if(i.log("flushAppQueue tick",window._tlq,i.LOUD),window._tlq&&window._tlq instanceof Array){var t=window._tlq.slice();if(window._tlq=[],Array.prototype.sort&&t.sort(function(t,e){if(t instanceof Array&&e instanceof Array){if("init"===t[0]&&"identify"===e[0])return-1;if("identify"===t[0]&&"init"===e[0])return 1;if("init"===t[0]||"identify"==t[0])return-1}return 2}),t.length>0){i.log("flushAppQueue: "+t.length,t,i.LOUD);for(var e=0;e<t.length;e++){var s=t[e],a=s.shift(),u=s;if(n[a]&&n[a]instanceof Function)try{n[a].apply(n,u)}catch(c){i.error("Attempted to call "+a+"("+(u||[]).join(",")+"); from the queue but failed!",c,i.USER),c&&c.stack&&i.error(c.stack,null,i.DEBUG)}}}}setTimeout(r.flushAppQueue,o.obj().functionFlushQueueTimeout)},r.flushAppQueue()},{"../config":28,"./app":7,"./lib/logger":20}],30:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===l?62:e===a||e===h?63:e<u?-1:e<u+10?e-u+26+26:e<f+26?e-f:e<c+26?e-c+26:void 0}function r(t){function r(t){c[l++]=t}var n,i,s,a,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;u="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new o(3*t.length/4-u),s=u>0?t.length-4:t.length;var l=0;for(n=0,i=0;n<s;n+=4,i+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===u?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&a)):1===u&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(a>>8&255),r(255&a)),c}function i(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,u="";for(i=0,s=t.length-a;i<s;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=r(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],31:[function(t,e,r){(function(e){"use strict";function n(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(r){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t){return this instanceof o?(o.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?s(this,t):"string"==typeof t?a(this,t,arguments.length>1?arguments[1]:"utf8"):u(this,t)):arguments.length>1?new o(t,arguments[1]):new o(t)}function s(t,e){if(t=d(t,e<0?0:0|v(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;r++)t[r]=0;return t}function a(t,e,r){"string"==typeof r&&""!==r||(r="utf8");var n=0|m(e,r);return t=d(t,n),t.write(e,r),t}function u(t,e){if(o.isBuffer(e))return c(t,e);if(Q(e))return f(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return l(t,e);if(e instanceof ArrayBuffer)return h(t,e)}return e.length?p(t,e):g(t,e)}function c(t,e){var r=0|v(e.length);return t=d(t,r),e.copy(t,0,0,r),t}function f(t,e){var r=0|v(e.length);t=d(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function l(t,e){var r=0|v(e.length);t=d(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function h(t,e){return o.TYPED_ARRAY_SUPPORT?(e.byteLength,t=o._augment(new Uint8Array(e))):t=l(t,new Uint8Array(e)),t}function p(t,e){var r=0|v(e.length);t=d(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function g(t,e){var r,n=0;"Buffer"===e.type&&Q(e.data)&&(r=e.data,n=0|v(r.length)),t=d(t,n);for(var i=0;i<n;i+=1)t[i]=255&r[i];return t}function d(t,e){o.TYPED_ARRAY_SUPPORT?(t=o._augment(new Uint8Array(e)),t.__proto__=o.prototype):(t.length=e,t._isBuffer=!0);var r=0!==e&&e<=o.poolSize>>>1;return r&&(t.parent=$),t}function v(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function y(t,e){if(!(this instanceof y))return new y(t,e);var r=new o(t,e);return delete r.parent,r}function m(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(n)return F(t).length;e=(""+e).toLowerCase(),n=!0}}function b(t,e,r){var n=!1;if(e=0|e,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),e<0&&(e=0),r>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return D(this,e,r);case"ascii":return I(this,e,r);case"binary":return k(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[r+s]=a}return s}function _(t,e,r,n){return H(F(e,t.length-r),t,r,n)}function E(t,e,r,n){return H(V(e),t,r,n)}function A(t,e,r,n){return E(t,e,r,n)}function S(t,e,r,n){return H(z(e),t,r,n)}function U(t,e,r,n){return H(J(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?X.fromByteArray(t):X.fromByteArray(t.slice(e,r))}function D(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,c,f,l;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(s=l));break;case 3:u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:u=t[i+1],c=t[i+2],f=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return x(n)}function x(t){var e=t.length;if(e<=W)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=W));return r}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;i++)n+=String.fromCharCode(127&t[i]);return n}function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;i++)n+=String.fromCharCode(t[i]);return n}function O(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;o++)i+=G(t[o]);return i}function B(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>i||e<s)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function P(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function L(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function j(t,e,r,n,i,o){if(e>i||e<o)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function q(t,e,r,n,i){return i||j(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,i){return i||j(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,r,n,52,8),r+8}function M(t){if(t=Y(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;s++){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function J(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function z(t){
return X.toByteArray(M(t))}function H(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);i++)e[i+r]=t[i];return i}var X=t("base64-js"),K=t("ieee754"),Q=t("isarray");r.Buffer=o,r.SlowBuffer=y,r.INSPECT_MAX_BYTES=50,o.poolSize=8192;var $={};o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),o.TYPED_ARRAY_SUPPORT?(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array):(o.prototype.length=void 0,o.prototype.parent=void 0),o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s&&t[i]===e[i];)++i;return i!==s&&(r=t[i],n=e[i]),r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Q(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new o(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new o(e),i=0;for(r=0;r<t.length;r++){var s=t[r];s.copy(n,i),i+=s.length}return n},o.byteLength=m,o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?D(this,0,t):b.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:o.compare(this,t)},o.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,i=0;r+i<t.length;i++)if(t[r+i]===e[n===-1?0:i-n]){if(n===-1&&(n=i),i-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(o.isBuffer(t))return r(this,t,e);if("number"==typeof t)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},o.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=e,e=0|r,r=i}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":return E(this,t,e,r);case"binary":return A(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var W=4096;o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n;if(o.TYPED_ARRAY_SUPPORT)n=o._augment(this.subarray(t,e));else{var i=e-t;n=new o(i,(void 0));for(var s=0;s<i;s++)n[s]=this[s+t]}return n.length&&(n.parent=this.parent||this),n},o.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},o.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),K.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),K.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),K.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),K.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||C(this,t,e,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||C(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||C(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||C(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||C(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||C(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||C(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=0,s=1,a=t<0?1:0;for(this[e]=255&t;++o<r&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=t<0?1:0;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||C(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||C(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||C(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||C(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return q(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return q(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,s=n-r;if(this===t&&r<e&&e<n)for(i=s-1;i>=0;i--)t[i+e]=this[i+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;i++)t[i+e]=this[i+r];else t._set(this.subarray(r,r+s),e);return s},o.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<r;n++)this[n]=t;else{var i=F(t.toString()),o=i.length;for(n=e;n<r;n++)this[n]=i[n%o]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=o.prototype;o._augment=function(t){return t.constructor=o,t._isBuffer=!0,t._set=t.set,t.get=Z.get,t.set=Z.set,t.write=Z.write,t.toString=Z.toString,t.toLocaleString=Z.toString,t.toJSON=Z.toJSON,t.equals=Z.equals,t.compare=Z.compare,t.indexOf=Z.indexOf,t.copy=Z.copy,t.slice=Z.slice,t.readUIntLE=Z.readUIntLE,t.readUIntBE=Z.readUIntBE,t.readUInt8=Z.readUInt8,t.readUInt16LE=Z.readUInt16LE,t.readUInt16BE=Z.readUInt16BE,t.readUInt32LE=Z.readUInt32LE,t.readUInt32BE=Z.readUInt32BE,t.readIntLE=Z.readIntLE,t.readIntBE=Z.readIntBE,t.readInt8=Z.readInt8,t.readInt16LE=Z.readInt16LE,t.readInt16BE=Z.readInt16BE,t.readInt32LE=Z.readInt32LE,t.readInt32BE=Z.readInt32BE,t.readFloatLE=Z.readFloatLE,t.readFloatBE=Z.readFloatBE,t.readDoubleLE=Z.readDoubleLE,t.readDoubleBE=Z.readDoubleBE,t.writeUInt8=Z.writeUInt8,t.writeUIntLE=Z.writeUIntLE,t.writeUIntBE=Z.writeUIntBE,t.writeUInt16LE=Z.writeUInt16LE,t.writeUInt16BE=Z.writeUInt16BE,t.writeUInt32LE=Z.writeUInt32LE,t.writeUInt32BE=Z.writeUInt32BE,t.writeIntLE=Z.writeIntLE,t.writeIntBE=Z.writeIntBE,t.writeInt8=Z.writeInt8,t.writeInt16LE=Z.writeInt16LE,t.writeInt16BE=Z.writeInt16BE,t.writeInt32LE=Z.writeInt32LE,t.writeInt32BE=Z.writeInt32BE,t.writeFloatLE=Z.writeFloatLE,t.writeFloatBE=Z.writeFloatBE,t.writeDoubleLE=Z.writeDoubleLE,t.writeDoubleBE=Z.writeDoubleBE,t.fill=Z.fill,t.inspect=Z.inspect,t.toArrayBuffer=Z.toArrayBuffer,t};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":30,ieee754:35,isarray:32}],32:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],33:[function(t,e,r){function n(t){if(t)return i(t)}function i(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}"undefined"!=typeof e&&(e.exports=n),n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],34:[function(t,e,r){!function(){"use strict";function t(e,r,n,i){return this instanceof t?(this.domain=e||void 0,this.path=r||"/",this.secure=!!n,this.script=!!i,this):new t(e,r,n,i)}function e(t,r,n){return t instanceof e?t:this instanceof e?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(n||"/"),this.explicit_path=!1,this.domain=r||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,t&&this.parse(t,r,n),this):new e(t,r,n)}function n(){var t,r,i;return this instanceof n?(t=Object.create(null),this.setCookie=function(n,o,s){var a,u;if(n=new e(n,o,s),a=n.expiration_date<=Date.now(),void 0!==t[n.name]){for(r=t[n.name],u=0;u<r.length;u+=1)if(i=r[u],i.collidesWith(n))return a?(r.splice(u,1),0===r.length&&delete t[n.name],!1):(r[u]=n,n);return!a&&(r.push(n),n)}return!a&&(t[n.name]=[n],t[n.name])},this.getCookie=function(e,n){var i,o;if(r=t[e])for(o=0;o<r.length;o+=1)if(i=r[o],i.expiration_date<=Date.now())0===r.length&&delete t[i.name];else if(i.matches(n))return i},this.getCookies=function(e){var r,n,i=[];for(r in t)n=this.getCookie(r,e),n&&i.push(n);return i.toString=function(){return i.join(":")},i.toValueString=function(){return i.map(function(t){return t.toValueString()}).join(";")},i},this):new n}t.All=Object.freeze(Object.create(null)),r.CookieAccessInfo=t,r.Cookie=e,e.prototype.toString=function(){var t=[this.name+"="+this.value];return this.expiration_date!==1/0&&t.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&t.push("domain="+this.domain),this.path&&t.push("path="+this.path),this.secure&&t.push("secure"),this.noscript&&t.push("httponly"),t.join("; ")},e.prototype.toValueString=function(){return this.name+"="+this.value};var i=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;e.prototype.parse=function(t,r,n){if(this instanceof e){var i,o=t.split(";").filter(function(t){return!!t}),s=o[0].match(/([^=]+)=([\s\S]*)/),a=s[1],u=s[2];for(this.name=a,this.value=u,i=1;i<o.length;i+=1)switch(s=o[i].match(/([^=]+)(?:=([\s\S]*))?/),a=s[1].trim().toLowerCase(),u=s[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=u?Number(Date.parse(u)):1/0;break;case"path":this.path=u?u.trim():"",this.explicit_path=!0;break;case"domain":this.domain=u?u.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=n||"/"),this.explicit_domain||(this.domain=r),this}return(new e).parse(t,r,n)},e.prototype.matches=function(e){return e===t.All||!(this.noscript&&e.script||this.secure&&!e.secure||!this.collidesWith(e))},e.prototype.collidesWith=function(t){if(this.path&&!t.path||this.domain&&!t.domain)return!1;if(this.path&&0!==t.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==t.path.indexOf(this.path))return!1;var e=t.domain&&t.domain.replace(/^[\.]/,""),r=this.domain&&this.domain.replace(/^[\.]/,"");if(r===e)return!0;if(r){if(!this.explicit_domain)return!1;var n=e.indexOf(r);return n!==-1&&n===e.length-r.length}return!0},r.CookieJar=n,n.prototype.setCookies=function(t,r,n){t=Array.isArray(t)?t:t.split(i);var o,s,a=[];for(t=t.map(function(t){return new e(t,r,n)}),o=0;o<t.length;o+=1)s=t[o],this.setCookie(s,r,n)&&a.push(s);return a}}()},{}],35:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,f=-7,l=r?i-1:0,h=r?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+t[e+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,g=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?h/u:h*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=g,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=g,s/=256,c-=8);t[r+p-g]|=128*d}},{}],36:[function(t,e,r){!function(r){"use strict";var n,i=r.Base64,o="2.1.9";if("undefined"!=typeof e&&e.exports)try{n=t("buffer").Buffer}catch(s){}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(t){for(var e={},r=0,n=t.length;r<n;r++)e[t.charAt(r)]=r;return e}(a),c=String.fromCharCode,f=function(t){if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?c(192|e>>>6)+c(128|63&e):c(224|e>>>12&15)+c(128|e>>>6&63)+c(128|63&e)}var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return c(240|e>>>18&7)+c(128|e>>>12&63)+c(128|e>>>6&63)+c(128|63&e)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,h=function(t){return t.replace(l,f)},p=function(t){var e=[0,2,1][t.length%3],r=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),n=[a.charAt(r>>>18),a.charAt(r>>>12&63),e>=2?"=":a.charAt(r>>>6&63),e>=1?"=":a.charAt(63&r)];return n.join("")},g=r.btoa?function(t){return r.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,p)},d=n?function(t){return(t.constructor===n.constructor?t:new n(t)).toString("base64")}:function(t){return g(h(t))},v=function(t,e){return e?d(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):d(String(t))},y=function(t){return v(t,!0)},m=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),b=function(t){switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return c((r>>>10)+55296)+c((1023&r)+56320);case 3:return c((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return c((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},w=function(t){return t.replace(m,b)},_=function(t){var e=t.length,r=e%4,n=(e>0?u[t.charAt(0)]<<18:0)|(e>1?u[t.charAt(1)]<<12:0)|(e>2?u[t.charAt(2)]<<6:0)|(e>3?u[t.charAt(3)]:0),i=[c(n>>>16),c(n>>>8&255),c(255&n)];return i.length-=[0,0,2,1][r],i.join("")},E=r.atob?function(t){return r.atob(t)}:function(t){return t.replace(/[\s\S]{1,4}/g,_)},A=n?function(t){return(t.constructor===n.constructor?t:new n(t,"base64")).toString()}:function(t){return w(E(t))},S=function(t){return A(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},U=function(){var t=r.Base64;return r.Base64=i,t};if(r.Base64={VERSION:o,atob:E,btoa:g,fromBase64:S,toBase64:v,utob:h,encode:v,encodeURI:y,btou:w,decode:S,noConflict:U},"function"==typeof Object.defineProperty){var T=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};r.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",T(function(){return S(this)})),Object.defineProperty(String.prototype,"toBase64",T(function(t){return v(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",T(function(){return v(this,!0)}))}}r.Meteor&&(Base64=r.Base64)}(this)},{buffer:31}],37:[function(t,e,r){!function(t,r){"undefined"!=typeof e&&e.exports?e.exports=r():t.lscache=r()}(this,function(){function t(){var t="__lscachetest__",r=t;if(void 0!==p)return p;try{if(!localStorage)return!1}catch(n){return!1}try{a(t,r),u(t),p=!0}catch(i){p=!(!e(i)||!localStorage.length)}return p}function e(t){return!!(t&&"QUOTA_EXCEEDED_ERR"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name||"QuotaExceededError"===t.name)}function r(){return void 0===g&&(g=null!=window.JSON),g}function n(t){return t.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")}function i(t){return t+v}function o(){return Math.floor((new Date).getTime()/m)}function s(t){return localStorage.getItem(d+w+t)}function a(t,e){localStorage.removeItem(d+w+t),localStorage.setItem(d+w+t,e)}function u(t){localStorage.removeItem(d+w+t)}function c(t){for(var e=new RegExp("^"+d+n(w)+"(.*)"),r=localStorage.length-1;r>=0;--r){var o=localStorage.key(r);o=o&&o.match(e),o=o&&o[1],o&&o.indexOf(v)<0&&t(o,i(o))}}function f(t){var e=i(t);u(t),u(e)}function l(t){var e=i(t),r=s(e);if(r){var n=parseInt(r,y);if(o()>=n)return u(t),u(e),!0}}function h(t,e){_&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+t),e&&window.console.warn("lscache - The error was: "+e.message))}var p,g,d="lscache-",v="-cacheexpiration",y=10,m=6e4,b=Math.floor(864e13/m),w="",_=!1,E={set:function(n,l,p){if(t()){if("string"!=typeof l){if(!r())return;try{l=JSON.stringify(l)}catch(g){return}}try{a(n,l)}catch(g){if(!e(g))return void h("Could not add item with key '"+n+"'",g);var d,v=[];c(function(t,e){var r=s(e);r=r?parseInt(r,y):b,v.push({key:t,size:(s(t)||"").length,expiration:r})}),v.sort(function(t,e){return e.expiration-t.expiration});for(var m=(l||"").length;v.length&&m>0;)d=v.pop(),h("Cache is full, removing item with key '"+n+"'"),f(d.key),m-=d.size;try{a(n,l)}catch(g){return void h("Could not add item with key '"+n+"', perhaps it's too big?",g)}}p?a(i(n),(o()+p).toString(y)):u(i(n))}},get:function(e){if(!t())return null;if(l(e))return null;var n=s(e);if(!n||!r())return n;try{return JSON.parse(n)}catch(i){return n}},remove:function(e){t()&&f(e)},supported:function(){return t()},flush:function(){t()&&c(function(t){f(t)})},flushExpired:function(){t()&&c(function(t){l(t)})},setBucket:function(t){w=t},resetBucket:function(){w=""},enableWarnings:function(t){_=t}};return E})},{}],38:[function(t,e,r){e.exports=t("./lib/")},{"./lib/":39}],39:[function(t,e,r){var n=t("./stringify"),i=t("./parse");e.exports={stringify:n,parse:i}},{"./parse":40,"./stringify":41}],40:[function(t,e,r){var n=t("./utils"),i={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};i.parseValues=function(t,e){for(var r={},i=t.split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),o=0,s=i.length;o<s;++o){var a=i[o],u=a.indexOf("]=")===-1?a.indexOf("="):a.indexOf("]=")+1;if(u===-1)r[n.decode(a)]="";else{var c=n.decode(a.slice(0,u)),f=n.decode(a.slice(u+1));Object.prototype.hasOwnProperty.call(r,c)?r[c]=[].concat(r[c]).concat(f):r[c]=f}}return r},i.parseObject=function(t,e,r){if(!t.length)return e;var n=t.shift(),o={};if("[]"===n)o=[],o=o.concat(i.parseObject(t,e,r));else{var s="["===n[0]&&"]"===n[n.length-1]?n.slice(1,n.length-1):n,a=parseInt(s,10),u=""+a;!isNaN(a)&&n!==s&&u===s&&a>=0&&a<=r.arrayLimit?(o=[],o[a]=i.parseObject(t,e,r)):o[s]=i.parseObject(t,e,r)}return o},i.parseKeys=function(t,e,r){if(t){var n=/^([^\[\]]*)/,o=/(\[[^\[\]]*\])/g,s=n.exec(t);if(!Object.prototype.hasOwnProperty(s[1])){var a=[];s[1]&&a.push(s[1]);for(var u=0;null!==(s=o.exec(t))&&u<r.depth;)++u,Object.prototype.hasOwnProperty(s[1].replace(/\[|\]/g,""))||a.push(s[1]);return s&&a.push("["+t.slice(s.index)+"]"),i.parseObject(a,e,r)}}},e.exports=function(t,e){if(""===t||null===t||"undefined"==typeof t)return{};e=e||{},e.delimiter="string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:i.delimiter,e.depth="number"==typeof e.depth?e.depth:i.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit;for(var r="string"==typeof t?i.parseValues(t,e):t,o={},s=Object.keys(r),a=0,u=s.length;a<u;++a){var c=s[a],f=i.parseKeys(c,r[c],e);o=n.merge(o,f)}return n.compact(o)}},{"./utils":42}],41:[function(t,e,r){var n=t("./utils"),i={delimiter:"&",arrayPrefixGenerators:{brackets:function(t,e){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t,e){return t}}};i.stringify=function(t,e,r){if(n.isBuffer(t)?t=t.toString():t instanceof Date?t=t.toISOString():null===t&&(t=""),"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return[encodeURIComponent(e)+"="+encodeURIComponent(t)];var o=[];if("undefined"==typeof t)return o;for(var s=Object.keys(t),a=0,u=s.length;a<u;++a){var c=s[a];o=Array.isArray(t)?o.concat(i.stringify(t[c],r(e,c),r)):o.concat(i.stringify(t[c],e+"["+c+"]",r))}return o},e.exports=function(t,e){e=e||{};var r="undefined"==typeof e.delimiter?i.delimiter:e.delimiter,n=[];if("object"!=typeof t||null===t)return"";var o;o=e.arrayFormat in i.arrayPrefixGenerators?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":"indices";for(var s=i.arrayPrefixGenerators[o],a=Object.keys(t),u=0,c=a.length;u<c;++u){var f=a[u];n=n.concat(i.stringify(t[f],f,s))}return n.join(r)}},{"./utils":42}],42:[function(t,e,r){r.arrayToObject=function(t){for(var e={},r=0,n=t.length;r<n;++r)"undefined"!=typeof t[r]&&(e[r]=t[r]);return e},r.merge=function(t,e){if(!e)return t;if("object"!=typeof e)return Array.isArray(t)?t.push(e):t[e]=!0,t;if("object"!=typeof t)return t=[t].concat(e);Array.isArray(t)&&!Array.isArray(e)&&(t=r.arrayToObject(t));for(var n=Object.keys(e),i=0,o=n.length;i<o;++i){var s=n[i],a=e[s];t[s]?t[s]=r.merge(t[s],a):t[s]=a}return t},r.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},r.compact=function(t,e){if("object"!=typeof t||null===t)return t;e=e||[];var n=e.indexOf(t);if(n!==-1)return e[n];if(e.push(t),Array.isArray(t)){for(var i=[],o=0,s=t.length;o<s;++o)"undefined"!=typeof t[o]&&i.push(t[o]);return i}var a=Object.keys(t);for(o=0,s=a.length;o<s;++o){var u=a[o];t[u]=r.compact(t[u],e)}return t},r.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},r.isBuffer=function(t){return null!==t&&"undefined"!=typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}],43:[function(t,e,r){e.exports=function(t,e,r){for(var n=0,i=t.length,o=3==arguments.length?r:t[n++];n<i;)o=e.call(null,o,t[n],++n,t);return o}},{}],44:[function(t,e,r){function n(){}function i(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){if(!b(t))return t;var e=[];for(var r in t)null!=t[r]&&s(e,r,t[r]);return e.join("&")}function s(t,e,r){return Array.isArray(r)?r.forEach(function(r){s(t,e,r)}):void t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}function a(t){for(var e,r,n={},i=t.split("&"),o=0,s=i.length;o<s;++o)r=i[o],e=r.split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return n}function u(t){var e,r,n,i,o=t.split(/\r?\n/),s={};o.pop();for(var a=0,u=o.length;a<u;++a)r=o[a],e=r.indexOf(":"),n=r.slice(0,e).toLowerCase(),i=_(r.slice(e+1)),s[n]=i;return s}function c(t){return/[\/+]json\b/.test(t)}function f(t){return t.split(/ *; */).shift()}function l(t){return y(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),n=r.shift(),i=r.shift();return n&&i&&(t[n]=i),t},{})}function h(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function p(t,e){var r=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new h(r)}catch(n){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=n,t.rawResponse=r.xhr&&r.xhr.responseText?r.xhr.responseText:null,t.statusCode=r.xhr&&r.xhr.status?r.xhr.status:null,r.callback(t)}if(r.emit("response",e),t)return r.callback(t,e);if(e.status>=200&&e.status<300)return r.callback(t,e);var i=new Error(e.statusText||"Unsuccessful HTTP response");i.original=t,i.response=e,i.status=e.status,r.callback(i,e)})}function g(t,e){var r=w("DELETE",t);return e&&r.end(e),r}var d,v=t("emitter"),y=t("reduce"),m=t("./request-base"),b=t("./is-object");d="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var w=e.exports=t("./request").bind(null,p);w.getXHR=function(){if(!(!d.XMLHttpRequest||d.location&&"file:"==d.location.protocol&&d.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var _="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};w.serializeObject=o,w.parseString=a,w.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},w.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},w.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},h.prototype.get=function(t){return this.header[t.toLowerCase()]},h.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=f(e);var r=l(e);for(var n in r)this[n]=r[n]},h.prototype.parseBody=function(t){var e=w.parse[this.type];return!e&&c(this.type)&&(e=w.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null},h.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},h.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,n="cannot "+e+" "+r+" ("+this.status+")",i=new Error(n);return i.status=this.status,i.method=e,i.url=r,i},w.Response=h,v(p.prototype);for(var E in m)p.prototype[E]=m[E];p.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr&&this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},p.prototype.type=function(t){return this.set("Content-Type",w.types[t]||t),this},p.prototype.responseType=function(t){return this._responseType=t,this},p.prototype.accept=function(t){return this.set("Accept",w.types[t]||t),this},p.prototype.auth=function(t,e,r){switch(r||(r={type:"basic"}),r.type){case"basic":var n=btoa(t+":"+e);this.set("Authorization","Basic "+n);break;case"auto":this.username=t,this.password=e}return this},p.prototype.query=function(t){return"string"!=typeof t&&(t=o(t)),t&&this._query.push(t),this},p.prototype.attach=function(t,e,r){return this._getFormData().append(t,e,r||e.name),this},p.prototype._getFormData=function(){return this._formData||(this._formData=new d.FormData),this._formData},p.prototype.send=function(t){var e=b(t),r=this._header["content-type"];if(e&&b(this._data))for(var n in t)this._data[n]=t[n];else"string"==typeof t?(r||this.type("form"),r=this._header["content-type"],"application/x-www-form-urlencoded"==r?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;
return!e||i(t)?this:(r||this.type("json"),this)},h.prototype.parse=function(t){return d.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.serialize(t),this},h.prototype.serialize=function(t){return this._parser=t,this},p.prototype.callback=function(t,e){var r=this._callback;this.clearTimeout(),r(t,e)},p.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},p.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(t){var e=this,r=this.xhr=w.getXHR(),o=this._query.join("&"),s=this._timeout,a=this._formData||this._data;this._callback=t||n,r.onreadystatechange=function(){if(4==r.readyState){var t;try{t=r.status}catch(n){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var u=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),t.direction="download",e.emit("progress",t)};this.hasListeners("progress")&&(r.onprogress=u);try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=u)}catch(f){}if(s&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},s)),o&&(o=w.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?r.open(this.method,this.url,!0,this.username,this.password):r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!i(a)){var l=this._header["content-type"],h=this._parser||w.serialize[l?l.split(";")[0]:""];!h&&c(l)&&(h=w.serialize["application/json"]),h&&(a=h(a))}for(var p in this.header)null!=this.header[p]&&r.setRequestHeader(p,this.header[p]);return this._responseType&&(r.responseType=this._responseType),this.emit("request",this),r.send("undefined"!=typeof a?a:null),this},w.Request=p,w.get=function(t,e,r){var n=w("GET",t);return"function"==typeof e&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n},w.head=function(t,e,r){var n=w("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},w.del=g,w["delete"]=g,w.patch=function(t,e,r){var n=w("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},w.post=function(t,e,r){var n=w("POST",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},w.put=function(t,e,r){var n=w("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n}},{"./is-object":45,"./request":47,"./request-base":46,emitter:33,reduce:43}],45:[function(t,e,r){function n(t){return null!=t&&"object"==typeof t}e.exports=n},{}],46:[function(t,e,r){var n=t("./is-object");r.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},r.parse=function(t){return this._parser=t,this},r.timeout=function(t){return this._timeout=t,this},r.then=function(t,e){return this.end(function(r,n){r?e(r):t(n)})},r.use=function(t){return t(this),this},r.get=function(t){return this._header[t.toLowerCase()]},r.getHeader=r.get,r.set=function(t,e){if(n(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},r.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},r.field=function(t,e){return this._getFormData().append(t,e),this}},{"./is-object":45}],47:[function(t,e,r){function n(t,e,r){return"function"==typeof r?new t("GET",e).end(r):2==arguments.length?new t("GET",e):new t(e,r)}e.exports=n},{}],48:[function(t,e,r){(function(t){var r,n=t.crypto||t.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function(){return n.getRandomValues(i),i}}if(!r){var o=new Array(16);r=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(t,e,r){function n(t,e,r){var n=e&&r||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){i<16&&(e[n+i++]=c[t])});i<16;)e[n+i++]=0;return e}function i(t,e){var r=e||0,n=u;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]}function o(t,e,r){var n=e&&r||0,o=e||[];t=t||{};var s=void 0!==t.clockseq?t.clockseq:p,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:d+1,c=a-g+(u-d)/1e4;if(c<0&&void 0===t.clockseq&&(s=s+1&16383),(c<0||a>g)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=a,d=u,p=s,a+=122192928e5;var f=(1e4*(268435455&a)+u)%4294967296;o[n++]=f>>>24&255,o[n++]=f>>>16&255,o[n++]=f>>>8&255,o[n++]=255&f;var l=a/4294967296*1e4&268435455;o[n++]=l>>>8&255,o[n++]=255&l,o[n++]=l>>>24&15|16,o[n++]=l>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(var v=t.node||h,y=0;y<6;y++)o[n+y]=v[y];return e?e:i(o)}function s(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;s++)e[n+s]=o[s];return e||i(o)}for(var a=t("./rng"),u=[],c={},f=0;f<256;f++)u[f]=(f+256).toString(16).substr(1),c[u[f]]=f;var l=a(),h=[1|l[0],l[1],l[2],l[3],l[4],l[5]],p=16383&(l[6]<<8|l[7]),g=0,d=0,v=s;v.v1=o,v.v4=s,v.parse=n,v.unparse=i,e.exports=v},{"./rng":48}]},{},[29]);